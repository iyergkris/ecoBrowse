(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2751:(e,t,s)=>{Promise.resolve().then(s.bind(s,2794))},2794:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eb});var a=s(5155),r=s(2115),l=s(6874),o=s.n(l),n=s(9708),i=s(2085),c=s(9434);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:o=!1,...i}=e,m=o?n.DX:"button";return(0,a.jsx)(m,{className:(0,c.cn)(d({variant:r,size:l,className:s})),ref:t,...i})});m.displayName="Button";let x=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,c.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});x.displayName="Input";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});u.displayName="Card";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",s),...r})});f.displayName="CardHeader";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});h.displayName="CardTitle";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",s),...r})});p.displayName="CardDescription";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,c.cn)("p-6 pt-0",s),...r})});g.displayName="CardContent";let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,c.cn)("flex items-center p-6 pt-0",s),...r})});j.displayName="CardFooter";var N=s(5863);let w=r.forwardRef((e,t)=>{let{className:s,value:r,indicatorClassName:l,...o}=e;return(0,a.jsx)(N.bL,{ref:t,className:(0,c.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...o,children:(0,a.jsx)(N.C1,{className:(0,c.cn)("h-full w-full flex-1 bg-primary transition-all",l),style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});function y(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,c.cn)("animate-pulse rounded-md bg-muted",t),...s})}w.displayName=N.bL.displayName;var b=s(172),v=s(659);let S=e=>{let t=Math.max(0,Math.min(1,e));return"hsl(".concat(120*t,", 70%, 45%)")};function E(e){let{score:t}=e,s=-1===t,r=s?0:Math.round(100*t),l=s?"hsl(var(--muted-foreground))":S(t),o="Poor";return!s&&(t>=.67?o="Good":t>=.34&&(o="Moderate")),(0,a.jsxs)(u,{className:"w-full transition-shadow duration-300 hover:shadow-lg",children:[(0,a.jsxs)(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(h,{className:"text-sm font-medium",children:"Eco-Efficiency Score"}),s?(0,a.jsx)(b.A,{className:"h-4 w-4 animate-spin text-muted-foreground"}):(0,a.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground",style:{color:l}})]}),(0,a.jsx)(g,{children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y,{className:"h-8 w-24 mb-2"})," ",(0,a.jsx)(y,{className:"h-3 w-full"})," "]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",style:{color:l},children:[r," / 100"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mb-2",children:["(",o," Efficiency - Higher is better)"]}),(0,a.jsx)(w,{value:r,className:"h-3 progress-indicator-colored",style:{"--progress-color":l}})]})})]})}var A=s(5727),C=s(9829),D=s(7311),T=s(594);function k(e){let{details:t,isLoading:s}=e,r=e=>e<0||e>1||isNaN(e)?"N/A":(100*e).toFixed(1)+"%";return(0,a.jsxs)(u,{className:"w-full transition-shadow duration-300 hover:shadow-lg",children:[(0,a.jsxs)(f,{children:[(0,a.jsx)(h,{children:"Efficiency Factors"}),(0,a.jsx)(p,{children:s?"Analyzing factors...":"Estimated factors influencing the eco-score."})]}),(0,a.jsx)(g,{children:s?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(A.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Est. Data Transfer"})]}),(0,a.jsx)(y,{className:"h-4 w-20"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(C.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Est. Server Efficiency"})]}),(0,a.jsx)(y,{className:"h-4 w-16"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(D.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Est. Renewable Energy"})]}),(0,a.jsx)(y,{className:"h-4 w-16"})]}),(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsxs)("h4",{className:"flex items-center gap-2 text-sm font-medium mb-2",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 text-muted-foreground"}),"Calculation Info"]}),(0,a.jsx)(y,{className:"h-3 w-full mb-1"}),(0,a.jsx)(y,{className:"h-3 w-3/4"})]})]}):t?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(A.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Est. Data Transfer"})]}),(0,a.jsx)("span",{className:"font-medium",children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(e<0||isNaN(e))return"N/A";if(0===e)return"0 Bytes";let s=["Bytes","KB","MB","GB","TB"],a=Math.max(0,Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1));return parseFloat((e/Math.pow(1024,a)).toFixed(t<0?0:t))+" "+s[a]}(t.dataTransferSize)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(C.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Est. Server Efficiency"})]}),(0,a.jsx)("span",{className:"font-medium",children:r(t.serverEnergyEfficiency)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(D.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Est. Renewable Energy"})]}),(0,a.jsx)("span",{className:"font-medium",children:r(t.renewableEnergyUsage)})]}),(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsxs)("h4",{className:"flex items-center gap-2 text-sm font-medium mb-2",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 text-muted-foreground"}),"Calculation Info"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground italic",children:t.calculationNotes})]})]}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Waiting for analysis results..."})})]})}let R=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,c.cn)("w-full caption-bottom text-sm",s),...r})})});R.displayName="Table";let F=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,c.cn)("[&_tr]:border-b",s),...r})});F.displayName="TableHeader";let z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,c.cn)("[&_tr:last-child]:border-0",s),...r})});z.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,c.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let M=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,c.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});M.displayName="TableRow";let I=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,c.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});I.displayName="TableHead";let P=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,c.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});P.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,c.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption";var _=s(7223),O=s(5300),L=s(7070),W=s(5299),U=s(3643),B=s(9556),V=s(7381),H=s(518);let J=U.bL;U.YJ;let Y=U.WT,G=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(U.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(U.In,{asChild:!0,children:(0,a.jsx)(B.A,{className:"h-4 w-4 opacity-50"})})]})});G.displayName=U.l9.displayName;let Z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(U.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(V.A,{className:"h-4 w-4"})})});Z.displayName=U.PP.displayName;let X=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(U.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(B.A,{className:"h-4 w-4"})})});X.displayName=U.wn.displayName;let q=r.forwardRef((e,t)=>{let{className:s,children:r,position:l="popper",...o}=e;return(0,a.jsx)(U.ZL,{children:(0,a.jsxs)(U.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...o,children:[(0,a.jsx)(Z,{}),(0,a.jsx)(U.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(X,{})]})})});q.displayName=U.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(U.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=U.JU.displayName;let K=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(U.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(U.VF,{children:(0,a.jsx)(H.A,{className:"h-4 w-4"})})}),(0,a.jsx)(U.p4,{children:r})]})});K.displayName=U.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(U.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=U.wv.displayName;var Q=s(4520);let $=Q.bL,ee=Q.l9,et=Q.ZL,es=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Q.hJ,{className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});es.displayName=Q.hJ.displayName;let ea=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(es,{}),(0,a.jsx)(Q.UC,{ref:t,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});ea.displayName=Q.UC.displayName;let er=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};er.displayName="AlertDialogHeader";let el=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};el.displayName="AlertDialogFooter";let eo=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Q.hE,{ref:t,className:(0,c.cn)("text-lg font-semibold",s),...r})});eo.displayName=Q.hE.displayName;let en=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Q.VY,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",s),...r})});en.displayName=Q.VY.displayName;let ei=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Q.rc,{ref:t,className:(0,c.cn)(d(),s),...r})});ei.displayName=Q.rc.displayName;let ec=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(Q.ZD,{ref:t,className:(0,c.cn)(d({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});ec.displayName=Q.ZD.displayName;var ed=s(7481);let em="ecoBrowseReports";function ex(){let[e,t]=(0,r.useState)([]),[l,o]=(0,r.useState)("weekly"),[n,i]=(0,r.useState)([]),{toast:c}=(0,ed.dj)(),[d,x]=(0,r.useState)(!1),N=(0,r.useCallback)(()=>{try{let e=localStorage.getItem(em),s=(e?JSON.parse(e):[]).sort((e,t)=>t.timestamp-e.timestamp);t(s),console.log("ReportsDashboard: Loaded data from localStorage")}catch(e){console.error("Failed to load report data:",e),c({title:"Error Loading Data",description:"Could not load report data.",variant:"destructive"})}},[c]),w=(0,r.useCallback)(e=>{e.key===em&&(console.log("ReportsDashboard: Storage change detected, reloading data."),N())},[N]);(0,r.useEffect)(()=>(x(!0),N(),window.addEventListener("storage",w),()=>{window.removeEventListener("storage",w)}),[N,w]);let y=(0,r.useCallback)((e,t)=>{let s={},a=e=>{let s=new Date(e);if("weekly"===t){let e=s.getDay(),t=new Date(s);return t.setDate(s.getDate()-e),t.setHours(0,0,0,0),"Week of ".concat(t.toISOString().split("T")[0])}return"monthly"===t?"".concat(s.toLocaleString("default",{month:"long"})," ").concat(s.getFullYear()):"".concat(s.getFullYear())};return e.forEach(e=>{if("number"!=typeof e.carbonScore||isNaN(e.carbonScore))console.warn("Skipping invalid report entry:",e);else{let t=a(e.timestamp);s[t]||(s[t]={entries:[],totalScore:0}),s[t].entries.push(e),s[t].totalScore+=e.carbonScore}}),Object.entries(s).map(e=>{let[t,{entries:s,totalScore:a}]=e,r=s.length,l=-1,o=2,n=null,i=null;return s.forEach(e=>{e.carbonScore>l&&(l=e.carbonScore,n=e.websiteUrl),e.carbonScore<o&&(o=e.carbonScore,i=e.websiteUrl)}),{period:t,totalVisits:r,averageScore:r>0?a/r*100:0,bestScoreSite:n?"".concat(n," (").concat((100*l).toFixed(0),")"):"N/A",worstScoreSite:i?"".concat(i," (").concat((100*o).toFixed(0),")"):"N/A"}}).sort((e,t)=>{try{let s,a;if(e.period.startsWith("Week of")?(s=new Date(e.period.replace("Week of ","")),a=new Date(t.period.replace("Week of ",""))):e.period.includes(" ")?(s=new Date(e.period),a=new Date(t.period)):(s=new Date(parseInt(e.period),0,1),a=new Date(parseInt(t.period),0,1)),!isNaN(s.getTime())&&!isNaN(a.getTime()))return a.getTime()-s.getTime()}catch(s){console.warn("Could not parse dates for sorting:",e.period,t.period,s)}return t.period.localeCompare(e.period)})},[]);(0,r.useEffect)(()=>{i(y(e,l))},[e,l,y]);let S=async()=>{if(0===n.length){c({title:"No Data",description:"Cannot download an empty report.",variant:"destructive"});return}try{let{default:e}=await Promise.all([s.e(930),s.e(913)]).then(s.bind(s,6597)),{default:t}=await Promise.all([s.e(930),s.e(913),s.e(87)]).then(s.t.bind(s,6087,23)),a=new e,r=n.map(e=>[e.period,e.totalVisits.toString(),e.averageScore.toFixed(0),e.bestScoreSite||"N/A",e.worstScoreSite||"N/A"]);a.setFontSize(18),a.text("EcoBrowse Eco-Efficiency Report",14,22),a.setFontSize(11),a.setTextColor(100),a.text("Timeframe: ".concat(l.charAt(0).toUpperCase()+l.slice(1)),14,30),a.text("Generated on: ".concat(new Date().toLocaleDateString()),14,35),t(a,{startY:45,head:[["Period","Total Visits","Avg. Score","Best Site (Score)","Worst Site (Score)"]],body:r,theme:"striped",headStyles:{fillColor:[77,175,100]},styles:{fontSize:8},columnStyles:{0:{cellWidth:35},1:{cellWidth:20,halign:"center"},2:{cellWidth:20,halign:"center"},3:{cellWidth:"auto"},4:{cellWidth:"auto"}},didParseCell:function(e){}});let o=a.lastAutoTable.finalY||45;a.setFontSize(9),a.setTextColor(150),a.text("Note: Scores range from 0 (worst) to 100 (best). Higher scores indicate better eco-efficiency.",14,o+10),a.save("EcoBrowse_Report_".concat(l,"_").concat(new Date().toISOString().split("T")[0],".pdf")),c({title:"Report Downloaded",description:"Your ".concat(l," report has been generated as PDF.")})}catch(e){console.error("Failed to generate PDF:",e),c({title:"PDF Generation Failed",description:"Could not generate the PDF report. Please try again.",variant:"destructive"})}};return d?(0,a.jsxs)(u,{className:"w-full transition-shadow duration-300 hover:shadow-lg",children:[(0,a.jsx)(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(h,{children:"Statistical Reports"}),(0,a.jsx)(p,{children:"Your browsing eco-efficiency overview."})]})}),(0,a.jsxs)(g,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-2 flex-wrap",children:[(0,a.jsxs)(J,{value:l,onValueChange:e=>o(e),children:[(0,a.jsx)(G,{className:"w-[180px]",children:(0,a.jsx)(Y,{placeholder:"Select timeframe"})}),(0,a.jsxs)(q,{children:[(0,a.jsx)(K,{value:"weekly",children:"Weekly"}),(0,a.jsx)(K,{value:"monthly",children:"Monthly"}),(0,a.jsx)(K,{value:"annual",children:"Annual"})]})]}),(0,a.jsxs)(m,{onClick:S,variant:"outline",size:"sm",disabled:0===n.length,children:[(0,a.jsx)(O.A,{className:"mr-2 h-4 w-4"}),"Download PDF"]})]}),n.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(R,{children:[(0,a.jsx)(F,{children:(0,a.jsxs)(M,{children:[(0,a.jsx)(I,{children:"Period"}),(0,a.jsx)(I,{className:"text-center",children:"Visits"}),(0,a.jsx)(I,{className:"text-center",children:"Avg. Score"}),(0,a.jsx)(I,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 text-green-600"})," Best Site"]})}),(0,a.jsx)(I,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(L.A,{className:"h-4 w-4 text-destructive"})," Worst Site"]})})]})}),(0,a.jsx)(z,{children:n.map(e=>(0,a.jsxs)(M,{children:[(0,a.jsx)(P,{className:"font-medium whitespace-nowrap",children:e.period}),(0,a.jsx)(P,{className:"text-center",children:e.totalVisits}),(0,a.jsx)(P,{className:"text-center font-semibold",children:e.averageScore.toFixed(0)}),(0,a.jsx)(P,{className:"text-xs truncate max-w-[150px] sm:max-w-[200px] whitespace-nowrap",title:e.bestScoreSite||"N/A",children:e.bestScoreSite||"N/A"}),(0,a.jsx)(P,{className:"text-xs truncate max-w-[150px] sm:max-w-[200px] whitespace-nowrap",title:e.worstScoreSite||"N/A",children:e.worstScoreSite||"N/A"})]},e.period))})]})}):(0,a.jsxs)("div",{className:"text-center py-10 text-muted-foreground",children:[(0,a.jsx)(W.A,{className:"mx-auto h-12 w-12 mb-2"}),(0,a.jsx)("p",{children:"No report data available for the selected timeframe."}),(0,a.jsx)("p",{className:"text-xs",children:"Analyze websites to generate reports."})]})]}),(0,a.jsx)(j,{className:"flex justify-end pt-4",children:(0,a.jsxs)($,{children:[(0,a.jsx)(ee,{asChild:!0,children:(0,a.jsxs)(m,{variant:"destructive",size:"sm",disabled:0===e.length,children:[(0,a.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"Clear All Data"]})}),(0,a.jsxs)(ea,{children:[(0,a.jsxs)(er,{children:[(0,a.jsx)(eo,{children:"Are you absolutely sure?"}),(0,a.jsx)(en,{children:"This action cannot be undone. This will permanently delete all your browsing report history stored locally."})]}),(0,a.jsxs)(el,{children:[(0,a.jsx)(ec,{children:"Cancel"}),(0,a.jsx)(ei,{onClick:()=>{t([]),i([]);try{localStorage.removeItem(em),console.log("Cleared data from localStorage"),window.dispatchEvent(new StorageEvent("storage",{key:em,newValue:null,storageArea:localStorage})),c({title:"Data Cleared",description:"All historical report data has been removed."})}catch(s){t(e),i(y(e,l)),console.error("Failed to clear storage:",s),c({title:"Error Clearing Data",description:"Could not remove report data from storage.",variant:"destructive"})}},children:"Continue"})]})]})]})})]}):(0,a.jsxs)(u,{className:"w-full",children:[(0,a.jsxs)(f,{children:[(0,a.jsx)(h,{children:"Statistical Reports"}),(0,a.jsx)(p,{children:"Loading report data..."})]}),(0,a.jsx)(g,{children:(0,a.jsx)("div",{className:"h-40 flex items-center justify-center text-muted-foreground",children:(0,a.jsx)(b.A,{className:"h-8 w-8 animate-spin"})})}),(0,a.jsx)(j,{className:"flex justify-end",children:(0,a.jsxs)(m,{variant:"destructive",size:"sm",disabled:!0,children:[(0,a.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"Clear All Data"]})})]})}let eu=e=>new Promise(t=>setTimeout(t,e));async function ef(e){if(await eu(1e3+1e3*Math.random()),e.includes("error.com"))throw Error("Simulated analysis error: Could not analyze this domain.");let t=e.length/50,s=Math.random(),a=Math.floor(512e3+2097152*s+524288*t),r=.7+.25*s,l=.2+.7*s,o=1-(.5*Math.min(1,a/4194304)+.25*(1-r)+.25*(1-l));return{carbonFootprintScore:Math.max(0,Math.min(1,o)),calculationNotes:"Eco-efficiency score based on estimated data transfer size (".concat((a/1024/1024).toFixed(2)," MB), inferred server efficiency (").concat((100*r).toFixed(1),"%), and projected renewable energy usage (").concat((100*l).toFixed(1),"%). Utilizes standard energy consumption models. Factors like CDN usage and specific hosting details are approximated. Final Score: ").concat(o.toFixed(3)," (Higher is better)."),dataTransferSize:a,serverEnergyEfficiency:r,renewableEnergyUsage:l}}var eh=s(1133),ep=s(7679);let eg=["google.com","youtube.com","facebook.com","wikipedia.org","amazon.com","reddit.com","yahoo.com","instagram.com","twitter.com","linkedin.com"];function ej(){let[e,t]=(0,r.useState)(eg.map(e=>({url:e,score:null,error:!1}))),[s,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{l(!0);let e=eg.map(async e=>{try{let t=await ef("https://".concat(e));return{url:e,score:Math.round(100*t.carbonFootprintScore),error:!1}}catch(t){return console.error("Error fetching score for ".concat(e,":"),t),{url:e,score:null,error:!0}}}),s=await Promise.all(e);s.sort((e,t)=>e.error&&t.error?0:e.error?1:t.error?-1:null===e.score&&null===t.score?0:null===e.score?1:null===t.score?-1:t.score-e.score),t(s),l(!1)})()},[]);let o=e=>{if(e.error)return(0,a.jsxs)("span",{className:"text-destructive flex items-center text-xs justify-end",children:[(0,a.jsx)(eh.A,{className:"mr-1 h-3 w-3"})," Error"]});if(null===e.score)return(0,a.jsx)("span",{className:"text-muted-foreground text-xs text-right",children:"N/A"});let t="text-destructive";return e.score>=67?t="text-green-600":e.score>=34&&(t="text-yellow-600"),(0,a.jsx)("span",{className:"font-medium ".concat(t),children:e.score})};return(0,a.jsxs)(u,{className:"w-full transition-shadow duration-300 hover:shadow-lg",children:[(0,a.jsxs)(f,{children:[(0,a.jsxs)(h,{className:"flex items-center gap-2",children:[(0,a.jsx)(ep.A,{className:"h-5 w-5 text-primary"}),"Popular Websites Eco-Scores"]}),(0,a.jsx)(p,{children:"Estimated eco-efficiency scores for some popular sites (Higher is better)."})]}),(0,a.jsxs)(g,{children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(F,{children:(0,a.jsxs)(M,{children:[(0,a.jsx)(I,{className:"w-[10px]",children:"#"}),(0,a.jsx)(I,{children:"Website"}),(0,a.jsx)(I,{className:"text-right",children:"Score (0-100)"})]})}),(0,a.jsx)(z,{children:s?Array.from({length:10}).map((e,t)=>(0,a.jsxs)(M,{children:[(0,a.jsx)(P,{children:(0,a.jsx)(y,{className:"h-4 w-4"})}),(0,a.jsx)(P,{children:(0,a.jsx)(y,{className:"h-4 w-3/4"})}),(0,a.jsx)(P,{className:"text-right",children:(0,a.jsx)(y,{className:"h-4 w-10 ml-auto"})})]},"skeleton-".concat(t))):e.map((e,t)=>(0,a.jsxs)(M,{children:[(0,a.jsx)(P,{className:"text-muted-foreground",children:t+1}),(0,a.jsx)(P,{className:"font-medium",children:e.url}),(0,a.jsx)(P,{className:"text-right",children:o(e)})]},e.url))})]}),s&&(0,a.jsxs)("div",{className:"flex items-center justify-center mt-4 text-muted-foreground text-sm",children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading scores..."]}),!s&&e.some(e=>e.error)&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-3 flex items-center",children:[(0,a.jsx)(eh.A,{className:"mr-1 h-3 w-3"}),"Some scores could not be calculated due to errors or site unavailability."]})]})]})}var eN=s(3838),ew=s(5074);let ey="ecoBrowseReports";function eb(){var e;let[t,s]=(0,r.useState)(""),[l,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[f,h]=(0,r.useState)(0),{toast:p}=(0,ed.dj)(),[g,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j(!0)},[]);let N=(0,r.useCallback)(async()=>{if(!t||i)return;let e=t;e.startsWith("http://")||e.startsWith("https://")||(e="https://".concat(e)),c(!0),u(null),n(e);try{let t=await ef(e);u(t);try{let s={timestamp:Date.now(),websiteUrl:e,carbonScore:t.carbonFootprintScore};if("undefined"!=typeof localStorage){let e=localStorage.getItem(ey),t=e?JSON.parse(e):[];t.push(s),localStorage.setItem(ey,JSON.stringify(t)),window.dispatchEvent(new StorageEvent("storage",{key:ey,newValue:JSON.stringify(t),storageArea:localStorage})),console.log("Report saved to localStorage")}else console.warn("localStorage unavailable, cannot save report."),p({title:"Storage Unavailable",description:"Could not save the analysis result to your reports.",variant:"destructive"});h(Date.now())}catch(e){console.error("Failed to save report data:",e),p({title:"Storage Error",description:"Could not save the analysis result to your reports.",variant:"destructive"})}p({title:"Analysis Complete",description:"Eco-Efficiency score calculated for ".concat(e)})}catch(t){console.error("Error calculating carbon footprint:",t),p({title:"Analysis Failed",description:t instanceof Error?t.message:"Could not analyze ".concat(e,". Please check the URL and try again."),variant:"destructive"}),n(null)}finally{c(!1)}},[t,i,p]);return((0,r.useEffect)(()=>{let e=e=>{e.key===ey&&null===e.newValue&&(console.log("Home: Detected report data cleared, triggering UI update."),h(Date.now()))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]),g)?(0,a.jsxs)("main",{className:"container mx-auto max-w-7xl p-4 md:p-8 space-y-8 bg-gradient-to-br from-background to-secondary/30 min-h-screen",children:[(0,a.jsxs)("header",{className:"text-center space-y-3",children:[(0,a.jsxs)(o(),{href:"/",className:"inline-block text-decoration-none",children:[" ",(0,a.jsxs)("div",{className:"inline-flex items-center justify-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-full text-lg font-semibold shadow-md transition-transform duration-200 hover:scale-105",children:[(0,a.jsx)(eN.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"EcoBrowse"})]})]}),(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight text-foreground",children:"Website Eco-Efficiency Analyzer"}),(0,a.jsx)("p",{className:"text-muted-foreground max-w-xl mx-auto",children:"Enter a website URL to check its estimated eco-efficiency score (higher is better) and browse greener."})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3 max-w-lg mx-auto p-2 bg-card rounded-lg shadow",children:[(0,a.jsx)(x,{type:"text",placeholder:"e.g., example.com",value:t,onChange:e=>{s(e.target.value),n(null),u(null)},onKeyPress:e=>"Enter"===e.key&&N(),className:"flex-grow border-muted focus:border-primary focus:ring-primary","aria-label":"Website URL Input",disabled:i}),(0,a.jsxs)(m,{onClick:N,disabled:i||!t,className:"w-full sm:w-auto shadow-sm hover:shadow-md transition-shadow",children:[i?(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(ew.A,{className:"mr-2 h-4 w-4"}),"Analyze"]})]}),(i||d)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-card/50 rounded-lg border border-border/50",children:[(0,a.jsx)(E,{score:i?-1:null!==(e=null==d?void 0:d.carbonFootprintScore)&&void 0!==e?e:0}),(0,a.jsx)(k,{details:d,isLoading:i})]}),(0,a.jsx)("div",{className:"pt-8",children:(0,a.jsx)(ex,{},f)}),(0,a.jsx)("div",{className:"pt-8",children:(0,a.jsx)(ej,{})}),(0,a.jsx)("footer",{className:"text-center text-xs text-muted-foreground pt-6",children:"EcoBrowse v0.1.0 - Helping you navigate the web sustainably."})]}):(0,a.jsxs)("main",{className:"container mx-auto max-w-7xl p-4 md:p-8 space-y-8 min-h-screen",children:[(0,a.jsxs)("header",{className:"text-center space-y-3",children:[(0,a.jsx)(y,{className:"h-8 w-32 inline-block rounded-full"}),(0,a.jsx)(y,{className:"h-10 w-3/4 mx-auto"}),(0,a.jsx)(y,{className:"h-4 w-1/2 mx-auto"}),(0,a.jsx)(y,{className:"h-4 w-2/3 mx-auto"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3 max-w-lg mx-auto p-2 bg-card rounded-lg shadow",children:[(0,a.jsx)(y,{className:"h-10 flex-grow rounded-md"}),(0,a.jsx)(y,{className:"h-10 w-28 rounded-md"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-card/50 rounded-lg border border-border/50",children:[(0,a.jsx)(y,{className:"h-32 w-full rounded-lg"}),(0,a.jsx)(y,{className:"h-48 w-full rounded-lg"})]}),(0,a.jsx)("div",{className:"pt-8",children:(0,a.jsx)(y,{className:"h-64 w-full rounded-lg"})}),(0,a.jsx)("div",{className:"pt-8",children:(0,a.jsx)(y,{className:"h-96 w-full rounded-lg"})}),(0,a.jsx)("footer",{className:"text-center text-xs text-muted-foreground pt-6",children:(0,a.jsx)(y,{className:"h-4 w-48 mx-auto"})})]})}},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>x});var a=s(2115);let r=0,l=new Map,o=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],c={toasts:[]};function d(e){c=n(c,e),i.forEach(e=>{e(c)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function x(){let[e,t]=a.useState(c);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2596),r=s(9688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[725,641,441,684,358],()=>t(2751)),_N_E=e.O()}]);